<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Validate Usagi File — updateUsagiFile • ROMOPMappingTools</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Validate Usagi File — updateUsagiFile"><meta name="description" content="Reads a usagi file given in 'pathToUsagiFile' and performs the following checks:
Default Usagi columns:
Check if all default Usagi columns are present:
Check if sourceCode and conceptId are unique
Check if sourceCode is not empty
Check if sourceName is not empty
Check if sourceName is less than 255 characters
If usagi file has C&amp;amp;CR columns:
Check if concept_id is not 0 for APPROVED mappingStatus
Check codes with mapping to more than one domain are mapped to compatible domains
Check if sourceValidStartDate is before sourceValidEndDate
Check if ADD_INFO:sourceParents is a valid concept code in the ADD_INFO:sourceParentVocabulary

"><meta property="og:description" content="Reads a usagi file given in 'pathToUsagiFile' and performs the following checks:
Default Usagi columns:
Check if all default Usagi columns are present:
Check if sourceCode and conceptId are unique
Check if sourceCode is not empty
Check if sourceName is not empty
Check if sourceName is less than 255 characters
If usagi file has C&amp;amp;CR columns:
Check if concept_id is not 0 for APPROVED mappingStatus
Check codes with mapping to more than one domain are mapped to compatible domains
Check if sourceValidStartDate is before sourceValidEndDate
Check if ADD_INFO:sourceParents is a valid concept code in the ADD_INFO:sourceParentVocabulary

"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">ROMOPMappingTools</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.1.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/filesFormat.html">Tables description and rules</a></li>
    <li><a class="dropdown-item" href="../articles/workAsGithubRepo.html">Running the complete mapping process</a></li>
    <li><a class="dropdown-item" href="../articles/workWithMultipleMappingFiles.html">Step by step example using individual functions</a></li>
    <li><a class="dropdown-item" href="../articles/workWithOneMappingFile.html">Working with individual mapping files</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Validate Usagi File</h1>

      <div class="d-none name"><code>updateUsagiFile.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Reads a usagi file given in 'pathToUsagiFile' and performs the following checks:
Default Usagi columns:</p><ul><li><p>Check if all default Usagi columns are present:</p></li>
<li><p>Check if sourceCode and conceptId are unique</p></li>
<li><p>Check if sourceCode is not empty</p></li>
<li><p>Check if sourceName is not empty</p></li>
<li><p>Check if sourceName is less than 255 characters
If usagi file has C&amp;CR columns:</p></li>
<li><p>Check if concept_id is not 0 for APPROVED mappingStatus</p></li>
<li><p>Check codes with mapping to more than one domain are mapped to compatible domains</p></li>
<li><p>Check if sourceValidStartDate is before sourceValidEndDate</p></li>
<li><p>Check if ADD_INFO:sourceParents is a valid concept code in the ADD_INFO:sourceParentVocabulary</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">updateUsagiFile</span><span class="op">(</span></span>
<span>  <span class="va">pathToUsagiFile</span>,</span>
<span>  <span class="va">connection</span>,</span>
<span>  <span class="va">vocabularyDatabaseSchema</span>,</span>
<span>  <span class="va">pathToUpdatedUsagiFile</span>,</span>
<span>  updateLevelTibble <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  appendOrClearAutoUpdatingInfo <span class="op">=</span> <span class="st">"append"</span>,</span>
<span>  skipValidation <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  sourceConceptIdOffset <span class="op">=</span> <span class="fl">0</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-pathtousagifile">pathToUsagiFile<a class="anchor" aria-label="anchor" href="#arg-pathtousagifile"></a></dt>
<dd><p>Path to the Usagi mapping file to validate</p></dd>


<dt id="arg-connection">connection<a class="anchor" aria-label="anchor" href="#arg-connection"></a></dt>
<dd><p>A DatabaseConnector connection object</p></dd>


<dt id="arg-vocabularydatabaseschema">vocabularyDatabaseSchema<a class="anchor" aria-label="anchor" href="#arg-vocabularydatabaseschema"></a></dt>
<dd><p>Schema name where the vocabulary tables are stored</p></dd>


<dt id="arg-pathtoupdatedusagifile">pathToUpdatedUsagiFile<a class="anchor" aria-label="anchor" href="#arg-pathtoupdatedusagifile"></a></dt>
<dd><p>Path where to save the updated Usagi file</p></dd>


<dt id="arg-updateleveltibble">updateLevelTibble<a class="anchor" aria-label="anchor" href="#arg-updateleveltibble"></a></dt>
<dd><p>Optional tibble defining relationship update rules. Default rules are:</p><ul><li><p>"Maps to" (level 1, no review needed)</p></li>
<li><p>"Concept replaced by" (level 2, review needed)</p></li>
<li><p>"Concept same_as to" (level 3, review needed)</p></li>
<li><p>"Concept poss_eq to" (level 4, review needed)</p></li>
</ul></dd>


<dt id="arg-appendorclearautoupdatinginfo">appendOrClearAutoUpdatingInfo<a class="anchor" aria-label="anchor" href="#arg-appendorclearautoupdatinginfo"></a></dt>
<dd><p>Whether to append ("append") or clear ("clear") auto-updating info</p></dd>


<dt id="arg-skipvalidation">skipValidation<a class="anchor" aria-label="anchor" href="#arg-skipvalidation"></a></dt>
<dd><p>Whether to skip validation checks if TRUE. Default is FALSE</p></dd>


<dt id="arg-sourceconceptidoffset">sourceConceptIdOffset<a class="anchor" aria-label="anchor" href="#arg-sourceconceptidoffset"></a></dt>
<dd><p>Integer offset to add to source concept IDs. Default is 0</p></dd>

</dl></div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Javier Gracia-Tabuenca.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

